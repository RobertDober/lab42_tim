
(def errors (atom []))
(defn add_error [error]
  (swap! errors conj error))

(defn write-to-file [text fnm]
  (let [lines (if (vector? text) (join "\n" text) text)]
    (execute
      (str "call writefile(split(\"" lines "\", \"\n\"), '" fnm "')"))))

(write-to-file @errors "../tmp/errors")
(execute "qa!")
